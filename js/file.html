<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register Your Interest</title>
    <link rel="stylesheet" href="./file.css" />
  </head>
  <body>
    <div class="container">
      <h1>Register Your Interest</h1>
      <p class="subtitle">
        Fill out the form and our team will contact you shortly.
      </p>

      <form id="leadForm">
        <div class="form-group">
          <label>Name *</label>
          <input type="text" id="name" required />
        </div>

        <div class="form-group">
          <label>Contact Number *</label>
          <input type="tel" id="phone" required />
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="email" id="email" />
        </div>

        <div class="form-group">
          <label>Product</label>
          <select id="product">
            <option value="">Select a Product</option>
            <option value="product-a">Product A</option>
            <option value="product-b">Product B</option>
            <option value="product-c">Product C</option>
          </select>
        </div>

        <div class="form-group">
          <label>Message</label>
          <textarea
            id="message"
            placeholder="Tell us about your requirements..."
          ></textarea>
        </div>

        <button type="submit" id="submitBtn">Submit Registration</button>

        <div id="statusMessage" class="message"></div>
      </form>
    </div>

    <script>
      const form = document.getElementById("leadForm");
      const submitBtn = document.getElementById("submitBtn");
      const statusMessage = document.getElementById("statusMessage");

      form.addEventListener("submit", async function (event) {
        event.preventDefault();

        const name = document.getElementById("name").value.trim();
        const phone = document.getElementById("phone").value.trim();
        const email = document.getElementById("email").value.trim();
        const product = document.getElementById("product").value;
        const message = document.getElementById("message").value.trim();

        if (!name || !phone) {
          showMessage("Name and Contact Number are required", "error");
          return;
        }

        // Validate email if provided
        if (email && !isValidEmail(email)) {
          showMessage("Please enter a valid email", "error");
          return;
        }

        // Prepare data
        const formData = {
          name: name,
          phone: phone,
          email: email,
          product: product,
          message: message,
          timestamp: new Date().toISOString(),
        };

        // Disable button and show loading
        submitBtn.disabled = true;
        submitBtn.textContent = "Submitting...";

        try {
          const response = await fetch(
            "https://jsonplaceholder.typicode.com/posts",
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(formData),
            }
          );

          if (!response.ok) {
            throw new Error("Submission failed");
          }

          const result = await response.json();
          console.log("Success:", result);

          // Show success message
          showMessage("Registration submitted successfully!", "success");
          form.reset();
        } catch (error) {
          console.error("Error:", error);
          showMessage("Failed to submit. Please try again.", "error");
        } finally {
          // Re-enable button
          submitBtn.disabled = false;
          submitBtn.textContent = "Submit Registration";
        }
      });

      function showMessage(text, type) {
        statusMessage.textContent = text;
        statusMessage.className = `message ${type}`;
        setTimeout(() => {
          statusMessage.className = "message";
        }, 5000);
      }

      function isValidEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      }
    </script>
  </body>
</html>